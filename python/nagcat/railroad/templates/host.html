{% extends "base.html" %}

{% block title %}Host detail: {{host_name}}{% endblock %}

{% block content %}

<h1>{{host_name}}</h1>

<div class="services">
<table>
{% for service in services %}
	<tr>
	{% ifequal service.0.current_state '0' %}
		<td class="greenbg">
	{% else %}
		{% ifequal service.0.current_state '1' %}
			<td class="yellowbg">
		{% else %}
			<td class="redbg">
		{% endifequal %}
	{% endifequal %}
	<h2><a href="{{host_name}}/{{service.0.service_description}}">{{service.0.service_description}}</a></h2>
	{{service.0.plugin_output}}
	</td>

	{% if service.1 %}
		<!--<td><div id="{{service.0.service_description|slugify}}" class="graph">{{host_name}}/{{service.0.service_description}}/1274475000/1274561400/100</div></td>-->
		<td>
			<div class="graph_container">
				<div class="options">
					<ul>
						{# TODO: Find a better way to set selected to match which graph we want? #}
						<li class="reset selected">live (day)</li>
						<li class="day">day</li>
						<li class="week">week</li>
						<li class="month">month</li>
						<li class="year">year</li>
						<li class="zoom" style="visibility: hidden">zoomed</li>
					</ul>
				</div>
				<div class="ajax_info">
					<div class="update"></div>
				</div>
				{# TODO: This has to be one line, as we grab the inner HTML to figure out what to graph, need a solution eventually #}
				<div id="{{service.0.service_description|slugify}}" class="graph ajax">{{host_name}}/{{service.0.service_description}}/1278613400/1278699000/100</div>
				<div class="legend">
				</div>
			</div>
		</td>
	{% endif %}
	
	</tr>
{% endfor %}
</table>
</div>
{% endblock %}
